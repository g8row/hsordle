# hsordle
## _wordle in haskell_

## Структура на проекта
Използван е стандартния ```cabal init```, като в директорията ```App``` има следните файлове:
- ```Main-linux.hs``` и ```Main-windows.hs``` - тъй като използвам емоджита, windows се нуждае от специален код за терминала, за да може да ги изобразява. Използвам библиотеката [Win32](https://hackage.haskell.org/package/Win32), но тя се компилира само на windows, за това има два отделни main файла, които се избират от cabal спрямо операционната система, както е описано в ```wordle.cabal```.
- ```Play.hs``` - в него се съдържа ```play``` функцията, която се изпълнява в началото на играта, в нея се набавя информация от потребителя чрез конзолата за дължината на думата, режима и нивото на играта. Също така чете и файла с думи ```words_alpha.txt```, който е взет от следното [github repo](https://github.com/dwyl/english-words). Спрямо тази информация се извиква съответната функция от съответните модули. Тук е и константата ```maxTurns```, в случая равна на 6.
- ```Utils.hs``` съдържа функции и дата типове, които се изпозват няколко файла. ```Mode``` - enum за ниво, ```Game``` - enum за режим, ```Color``` - enum за цветовете (сиво(макар че емоджито е бяло), жълто, зелено), с няколко функции за преобразуване от и към ```Color```. ```readLenFromConsole, chooseGame, chooseMode``` са IO функции, които взимат данни от играча чрез входа на конзолата. ```createResult``` създава списък от ```Color```, който отговаря по правилата на Wordle спрямо двете подадени думи - опит и днешната дума. ```getRandomWord``` използва [System.Random](https://hackage.haskell.org/package/random) за да даде произволна дума от списък с думи.
- ```Wordle.hs``` - тук се съдържа кода за режим Wordle. ```playTurn, playTurnEasy, playTurnHard``` са рекурсивни IO функции за съответните нива на играта, приемат думата, която е произволно избрана от списъка с думи във функцията ```play```, дължината на думата, сегашния ход, максималния брой ходове и други помощни аргументи спрямо нивото - в ```playTurnEasy``` имаме списъци с букви, които са срещнати в съответния цвят и списък със думите от речника, за да могат да се използват в функциите ```grayHints, yellowHints, greenHints, dictHints```, които се използват за предупреждаване на играча. В ```playTurnHard``` има булева променлива ```haveLied``` и ```Data.Map (Int,Char) Color```, който съдържа цветовете на срещани букви на специфични позиции до момента на "лъженето", за да може да няма противоречия с предишните резултати, като се подава на функцията ```lyingResult```, която създава "лъжлив резултат". ```lie``` функцията връща цвят, който е различен от правилния за буквата. ```playTurn``` е функция за нормалното ниво на Wordle и няма помощни аргументи. Функциите проверяват за валиден вход, изпълняват допълнителните си действия (hints, lying) и извикват себе си или приключват с ```putStrLn```.
- ```Helper.hs``` - този модул съдържа рекурсивната IO функция ```playHelper```, която приема думата, която алгоритъмът трябва да познае, предишния си опит, списъка с възможни думи, списък с буквите, които знае, че не са думата,```Data.Map (Int,Char) Color``` за наредените двойки (позиция, буква), които са "жълти" и "зелени", дължината на думата и колко хода са останали. Проверява се входа дали отговаря на правилата на Wordle, дали съществуват думи, отговарящи на входа, след което в ```getFilteredWords``` се филтрира списъка с думи спрямо входа, като опитът на алгоритъма се избира като ```getMostEliminatingWord``` взима произволна дума от списък с "най-елиминиращи думи", създаден от ```elimFilter```, който намира думите, чието множество от букви има най-много непразни сечения с множествата от букви на другите думи от филтрирания списък от думи. Опитът се сравнява с думата на деня и или се извиква отново функцията с обновените помощни аргументи, или играта приключва с ```putStrLn``` заради край на играта.